{
  "name": "ktomk/pipelines",
  "description": "bitbucket pipelines runner",
  "minimum-stability": "stable",
  "license": "AGPL-3.0-or-later",
  "authors": [
    {
      "name": "Tom Klingenberg",
      "email": "ktomk@github.com"
    }
  ],
  "support": {
    "issues": "https://github.com/ktomk/pipelines/issues"
  },
  "bin": ["bin/pipelines"],
  "autoload": {
    "psr-4": {"Ktomk\\Pipelines\\": "src/"}
  },
  "autoload-dev": {
    "classmap": ["tests/TestCase.php"],
    "psr-4": {
      "Ktomk\\Pipelines\\Integration\\": "tests/integration",
      "Ktomk\\Pipelines\\": "tests/unit"
    },
    "files": [
      "tests/phpunit_class_aliases.php"
    ]
  },
  "require": {
    "php": "^5.3.3 || ^7.0",
    "ext-json": "*",
    "symfony/yaml": "~2.6.13"
  },
  "require-dev": {
    "friendsofphp/php-cs-fixer": "^2.14.2",
    "phpunit/phpunit": "^6.5"
  },
  "suggest": {
    "ext-yaml": "Preferred YAML parser; highly recommended."
  },
  "scripts": {
    "build": "@php -d phar.readonly=0 -f lib/build/build.php # build phar file",
    "cs-check": "@php -f vendor/bin/php-cs-fixer -- fix --dry-run",
    "cs-fix": "@php -f vendor/bin/php-cs-fixer -- fix",
    "dev": [
      "@cs-fix",
      "@unit-test"
    ],
    "reset": "git checkout -- composer.json composer.lock && rm -r vendor/ && composer install --no-suggest",
    "test": [
      "@composer validate --strict",
      "@phpunit-test",
      "tests/shell/run.sh"
    ],
    "unit-test": [
      "@php -d phar.readonly=0 -f vendor/bin/phpunit -- -v --log-junit build/log/junit.xml --coverage-clover build/log/clover.xml tests/unit",
      "@php -f lib/coverage/checker.php -- build/log/clover.xml"
    ],
    "integration-test": [
      "@php -d phar.readonly=0 -f vendor/bin/phpunit -- -v tests/integration"
    ],
    "phpunit-test": [
      "@php -d phar.readonly=0 -f vendor/bin/phpunit -- -v --log-junit build/log/junit.xml --coverage-clover build/log/clover.xml tests",
      "@php -f lib/coverage/checker.php -- build/log/clover.xml"
    ],
    "ci": [
      "@composer validate --strict",
      "@cs-check",
      "bin/pipelines --no-keep --verbatim --pipeline custom/lint-php-5.3",
      "@build",
      "@test"
    ]
  },
  "config": {
    "autoloader-suffix": "pipelines",
    "sort-packages": true
  }
}
